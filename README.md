WebSocketを使って、複数のブラウザ間でチャットしてみる。  
通常のHTTPは、「クライアントがリクエストを出す→サーバがレスポンスを返す」
という流れで、サーバが起点になることはない。
ただ、クライアントから何か言われる前に、サーバから何かしたくなることもある。
WebSocketはそういうときに便利。

あと、WebSocketはクライアントとサーバが接続を維持する形になる。
リソースを消耗しないよう、HTTPに比べ、やりとりするデータが軽いらしい。

## 実装
サーバは、HTTPとWebSocketの両方のプロトコルに対応する形にした。
開発フレームワークは、Express.jsを使った。  
クライアントは普通にChromeでやってみた。

サーバ側では、Node.jsをインストールした後、
> npm install  
> npm start

とやるだけで起動できる。

後は、普通にブラウザで
`http://localhost:8080`などとサーバを見に行けばいい。
ホスト名は、各自の環境に応じて読み替えること。
別にIPアドレス直打ちでも良い。

## 動作
ページを開くと、チャットの接続は勝手に始まる。
クライアントは、テキストボックスに入力した文字列を
Enterしたときにサーバに送る
（自然な動作）。  
サーバは、クライアントから来た文字列を、単にクライアント全員（送り主含む）に送り返す。  
クライアントは、送り返されてきた文字列をDOMに追加する。  
実装がWebSocketでどうのこうのという話は、意識に入らない。

Chromeのデバッグコンソールには色んな情報が出るので、
自分で実験すると色々おもしろい。
（WSプロトコルを使うことはあまりないので、見慣れないものが多い）

## 参考
- [Socket.ioのGet Started](http://socket.io/get-started/chat/)
- [@ITの記事](http://www.atmarkit.co.jp/ait/articles/1603/14/news015.html)
